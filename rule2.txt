(gen[i][j] and (gen[i-1][j-1]+gen[i-1][j]+gen[i-1][(j+1)%size[0]]+gen[i][j-1]+gen[i][(j+1)%size[0]]+gen[(i+1)%size[1]][j-1]+gen[(i+1)%size[1]][j]+gen[(i+1)%size[1]][(j+1)%size[0]] in [2,3])) or (not(gen[i][j]) and (gen[i-1][j-1]+gen[i-1][j]+gen[i-1][(j+1)%size[0]]+gen[i][j-1]+gen[i][(j+1)%size[0]]+gen[(i+1)%size[1]][j-1]+gen[(i+1)%size[1]][j]+gen[(i+1)%size[1]][(j+1)%size[0]] == 3))